# Benchmark Test Data

This directory contains generated test data files used for performance benchmarking.

## 📁 File Structure

Test files are automatically generated by running the benchmark suites:

```
data/
├── README.md                # This file
├── small_1mb.mf4          # 1MB test file (~10K samples)
├── medium_10mb.mf4        # 10MB test file (~100K samples)  
├── large_100mb.mf4        # 100MB test file (~1M samples)
├── huge_500mb.mf4         # 500MB test file (~5M samples)
├── py_small_1mb.mf4       # Python-generated 1MB file
├── py_medium_10mb.mf4     # Python-generated 10MB file
├── py_large_100mb.mf4     # Python-generated 100MB file
├── *.index.json           # Index files for each MDF file
└── *.rust_index.json      # Rust-generated index files
```

## 🎯 Test Data Characteristics

### Channel Configuration
All test files contain 7 channels with realistic automotive sensor data:

| Channel | Data Type | Pattern | Description |
|---------|-----------|---------|-------------|
| **Temperature** | Float64 | Sine wave + noise | Engine temperature (°C) |
| **Pressure** | Float64 | Cosine wave + trend | Intake pressure (bar) |
| **Speed** | Float64 | Ramp + variations | Vehicle speed (km/h) |
| **Voltage** | Float64 | Square wave | Battery voltage (V) |
| **Current** | Float64 | Triangle wave | Current draw (A) |
| **Flow** | Int32 | Stepped pattern | Fuel flow (L/h) |
| **Level** | Boolean | Toggle pattern | Tank level indicator |

### Data Patterns
- **Realistic Noise**: Gaussian noise added to simulate real sensors
- **Temporal Correlation**: Sequential data with proper time relationships
- **Value Ranges**: Automotive-typical ranges for each sensor type
- **Sampling Rate**: 1Hz to 1kHz depending on sensor type

## 🔧 Generating Test Data

### Automatic Generation
Test files are created automatically when running benchmarks:

```bash
# Rust generator (creates Rust-native files)
cargo run --example data_generator

# Python generator (creates Python-compatible files)  
cd benchmarks/python
python python_performance_benchmark.py
```

### Manual Generation
If you need to regenerate specific files:

```bash
# Generate only specific sizes
cargo run --example data_generator -- --size 1mb
cargo run --example data_generator -- --size 10mb

# Generate with custom parameters
cargo run --example data_generator -- --channels 10 --samples 50000
```

## 📊 File Size Details

### Expected File Sizes
| File | Approximate Size | Sample Count | Channels | Duration |
|------|-----------------|--------------|----------|----------|
| `small_1mb.mf4` | 0.3-0.5 MB | 10,000 | 7 | ~10 seconds |
| `medium_10mb.mf4` | 3.0-3.5 MB | 100,000 | 7 | ~100 seconds |
| `large_100mb.mf4` | 30-35 MB | 1,000,000 | 7 | ~1,000 seconds |
| `huge_500mb.mf4` | 150-160 MB | 5,000,000 | 7 | ~5,000 seconds |

*Note: Actual sizes may vary due to compression and data patterns*

### Index File Sizes
Index files are extremely compact:
- **1MB file** → ~2.4KB index (135x smaller)
- **10MB file** → ~2.4KB index (1,346x smaller)
- **100MB file** → ~3.2KB index (10,032x smaller)
- **500MB file** → ~6.8KB index (23,526x smaller)

## 🔍 Data Validation

### Integrity Checks
Each generated file includes:
- **Header validation**: Proper MDF4 format compliance
- **Channel metadata**: Correct data types and ranges
- **Data consistency**: No missing or corrupted samples
- **Timestamp accuracy**: Proper temporal sequencing

### Quality Metrics
```
Data Quality Validation:
├── Format compliance: MDF 4.1 standard
├── Channel count: 7 channels per file
├── Sample integrity: No missing values
├── Time base: Monotonic timestamps
└── Value ranges: Within expected sensor limits
```

## 🧹 Cleanup & Management

### Disk Space Usage
Total space required for full test suite:
- **MDF files**: ~200 MB
- **Index files**: ~20 KB
- **Temporary files**: ~50 MB (during generation)
- **Total**: ~250 MB

### Cleanup Commands
```bash
# Remove all test data files
rm -f *.mf4 *.json

# Windows PowerShell
Remove-Item *.mf4, *.json

# Keep only essential files (remove large files)
rm -f huge_500mb.mf4 large_100mb.mf4
```

### Automated Cleanup
Add to `.gitignore` if you don't want to commit test data:
```gitignore
benchmarks/data/*.mf4
benchmarks/data/*.json
benchmarks/data/*.index
```

## 🚀 Usage in Benchmarks

### Loading Test Data
```rust
// Rust example
let test_files = [
    "benchmarks/data/small_1mb.mf4",
    "benchmarks/data/medium_10mb.mf4",
    "benchmarks/data/large_100mb.mf4",
];

for file_path in &test_files {
    let mdf = MDF::from_file(file_path)?;
    // Run benchmarks...
}
```

```python
# Python example
import os
import mf4_rs

test_files = [
    "small_1mb.mf4",
    "medium_10mb.mf4", 
    "large_100mb.mf4",
]

for file_path in test_files:
    full_path = os.path.join("benchmarks", "data", file_path)
    if os.path.exists(full_path):
        mdf = mf4_rs.PyMDF(full_path)
        # Run benchmarks...
```

### Index File Usage
```rust
// Load index for fast access
let index_file = "benchmarks/data/large_100mb.mf4.rust_index.json";
let index = MdfIndex::load_from_file(index_file)?;

// Use index for targeted reading
let values = index.read_channel_values_by_name("Temperature", &mut reader)?;
```

## ⚙️ Customization

### Custom Test Data
To create test data with specific characteristics:

```rust
// Custom channel configuration
let custom_config = ChannelConfig {
    name: "CustomSensor",
    data_type: DataType::Float64,
    samples: 50000,
    pattern: SensorPattern::Sine { 
        amplitude: 10.0, 
        frequency: 0.1,
        offset: 25.0 
    },
};
```

### Alternative Data Patterns
Supported patterns for test data generation:
- **Sine/Cosine**: Periodic oscillations
- **Linear Ramp**: Steadily increasing/decreasing
- **Square Wave**: Digital on/off patterns  
- **Triangle**: Sawtooth patterns
- **Random Walk**: Brownian motion simulation
- **Step Function**: Discrete level changes

## 🔒 Security & Privacy

### No Sensitive Data
All test files contain:
- ✅ Simulated sensor data only
- ✅ No real vehicle information
- ✅ No personal or confidential data
- ✅ Open source compatible patterns

### Safe for Version Control
Test data files are safe to commit to public repositories as they contain only synthetic automotive sensor patterns.

## 🤝 Contributing Test Data

When contributing new test patterns:

1. **Keep it realistic**: Base patterns on actual automotive sensors
2. **Document thoroughly**: Explain the sensor type and expected behavior
3. **Validate format**: Ensure MDF4 compliance
4. **Include metadata**: Channel descriptions and units
5. **Test across sizes**: Verify pattern scales properly

### Example Contribution
```rust
// New sensor pattern contribution
pub fn generate_abs_sensor_pattern(sample_count: usize) -> Vec<f64> {
    // ABS sensor: wheel speed with occasional lock-up events
    (0..sample_count)
        .map(|i| {
            let base_speed = 50.0; // Base wheel speed
            let lock_event = if i % 5000 == 0 { -45.0 } else { 0.0 };
            base_speed + lock_event + rand::thread_rng().gen_range(-2.0..2.0)
        })
        .collect()
}
```